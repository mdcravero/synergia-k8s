---
apiVersion: v1
kind: ConfigMap
metadata:
  name: authentik-values
  namespace: security
data:
  values.yaml: |-
    # Default values for authentik.
    authentik:
    secret_key: "MXyuoc5rJ+ZY7Ets+HyBH4tv8HP86yaW/IHt5tcZzUJ4LcZbbzVVxT4aJisBI8RnoilJX2H9jJdAGwiB"
    # This sends anonymous usage-data, stack traces on errors and
    # performance data to sentry.io, and is fully opt-in
    error_reporting:
        enabled: true

    server:
      ingress:
        # Specify kubernetes ingress controller class name
        ingressClassName: traefik
        enabled: true
        hosts:
            - authentik.synergia-it.net.ar
        
        volumes:
          - name: postgres-creds
            secret:
              secretName: authentik-postgres-credentials
        volumeMounts:
          - name: postgres-creds
            mountPath: /postgres-creds
            readOnly: true

    postgresql:
      enabled: true
      host: 192.168.1.70
      auth:
        user: file:///postgres-creds/username
        password: file:///postgres-creds/password
        database: authentik

    redis:
      enabled: true
      host: 192.168.1.71
      architecture: standalone
        auth:
        enabled: true
