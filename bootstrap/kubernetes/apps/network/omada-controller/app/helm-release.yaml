---
apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: omada-controller
  namespace: services
spec:
  chart:
    spec:
      chart: omada-controller
      reconcileStrategy: ChartVersion
      sourceRef:
        kind: HelmRepository
        name: omada-controller
      version: 4.4.2
  interval: 1m0s
  releaseName: omada-controller
values:
  image:
    pullPolicy: IfNotPresent
    repository: mbentley/omada-controller
    tag: "4.3"
  ingress:
    main:
      enabled: false
  persistence:
    data:
      enabled: false
  service:
    main:
      ports:
        http:
          port: 8043
      type: LoadBalancer
  data:
    enabled: true
    storageClass: nfs-client
    size: 1Gi
    accessMode: ReadWriteOnce
    mountPath: /opt/tplink/EAPController/data
